(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{367:function(e,t,n){"use strict";n.r(t);var i=n(836),a=n(511);for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n(837);var o=n(16),c=Object(o.a)(a.default,i.render,i.staticRenderFns,!1,null,"884dee58",null);t.default=c.exports},511:function(e,t,n){"use strict";n.r(t);var i=n(512),a=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t.default=a.a},512:function(e,t,n){"use strict";(function(e,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{type:[],array:[],name:null,opened:!1,loading:!1,upload:{options:{max_file_size:"1mb"}},item:{},cache:[]}},created:function(){var t=this;e.get("/type/list",{}).then((function(e){e.ok&&(t.type=e.body,t.type.length>0&&t.select(t.type[0]))}))},methods:{inputIcon:function(t){e.post("/type/update",{id:this.item.id,url:t}).then((function(e){e.ok&&n.$Message.success("上传成功")}))},inputImage:function(t){var i=this;if(t.length>this.cache.length){var a=this.cache.length;e.post("/image/create",{url:t[a],idType:this.item.id}).then((function(e){e.ok&&(n.$Message.success("上传成功"),i.cache.push(e.body))}))}else if(t.length<this.cache.length){for(var s=0;s<t.length&&t[s]==this.cache[s].url;s++);e.post("/image/delete",{id:this.cache[s].id}).then((function(e){e.ok&&(n.$Message.success("删除成功"),i.cache.splice(s,1))}))}},save:function(){var t=this;e.post("/type/create",{name:this.name}).then((function(e){t.opened=!1,e.ok&&(n.$Message.success("创建成功"),t.type.push(e.body),t.select(e.body))}))},select:function(t){var n=this;this.item=t,this.type.forEach((function(e){e.color={"h-btn-text-green":e.id==t.id,"h-btn-text-gray":e.id!=t.id}})),e.get("/image/list",{idType:t.id}).then((function(e){e.ok&&(n.cache=e.body,n.array=[],e.body.forEach((function(e){n.array.push(e.url)})))}))},remove:function(){var t=this;i.confirm(this,"确定删除该类型 ？",(function(i){t.loading=!0,i.close(),e.post("/type/delete",{id:t.item.id}).then((function(e){t.loading=!1,e.ok&&n.$Message.success("删除成功")}))}))}}};t.default=a}).call(this,n(153).default,n(69),n(107).default)},653:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"frame-page"},[t("div",{staticClass:"h-panel page-header"},[t("div",{staticClass:"h-panel-body"},[t("Row",{attrs:{type:"flex",space:20}},[e._l(e.type,(function(n,i){return t("Cell",{key:i,attrs:{width:2}},[t("Button",{class:n.color,on:{click:function(t){return e.select(n)}}},[e._v(e._s(n.name))])],1)})),e._v(" "),t("Cell",{attrs:{flex:1}},[t("Button",{attrs:{color:"primary"},on:{click:function(t){e.opened=!0}}},[e._v("新建类型")])],1)],2)],1)]),e._v(" "),t("div",{staticClass:"h-panel page-header"},[t("div",{staticClass:"h-panel-body"},[t("Row",{attrs:{type:"flex",space:20}},[t("Cell",{staticClass:"block",attrs:{width:4}},[t("Qiniu",{staticClass:"qiniu",attrs:{options:e.upload.options,type:"image","data-type":"url"},on:{input:e.inputIcon},model:{value:e.item.url,callback:function(t){e.$set(e.item,"url",t)},expression:"item.url"}}),e._v(" "),t("Button",{staticClass:"btn",attrs:{circle:"",size:"l",color:"primary"},on:{click:e.remove}},[e._v("删除类型")])],1),e._v(" "),t("Cell",{staticClass:"content",attrs:{width:18}},[t("Qiniu",{attrs:{className:"preview",options:e.upload.options,type:"images","data-type":"url"},on:{input:e.inputImage},model:{value:e.array,callback:function(t){e.array=t},expression:"array"}})],1)],1)],1)])]),e._v(" "),t("Modal",{model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[t("div",{staticClass:"modal-dialog"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"请输入类型名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),t("div",[t("Button",{staticClass:"modal-btn",attrs:{circle:"",size:"l"},on:{click:function(t){e.opened=!1}}},[e._v("取消")]),e._v(" "),t("Button",{staticClass:"modal-btn",attrs:{color:"primary",circle:"",size:"l",loading:e.loading},on:{click:e.save}},[e._v("确定")])],1)])])],1)};t.render=i;t.staticRenderFns=[],i._withStripped=!0},654:function(e,t,n){},836:function(e,t,n){"use strict";var i=n(653);n.o(i,"render")&&n.d(t,"render",(function(){return i.render})),n.o(i,"staticRenderFns")&&n.d(t,"staticRenderFns",(function(){return i.staticRenderFns}))},837:function(e,t,n){"use strict";n(654)}}]);