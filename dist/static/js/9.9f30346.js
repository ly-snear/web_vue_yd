(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{357:function(e,t,a){"use strict";a.r(t);var o=a(817),r=a(491);for(var s in r)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(s);a(818);var n=a(16),i=Object(n.a)(r.default,o.render,o.staticRenderFns,!1,null,"f75980ae",null);t.default=i.exports},491:function(e,t,a){"use strict";a.r(t);var o=a(492),r=a.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);t.default=r.a},492:function(e,t,a){"use strict";(function(e,a,o,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={data:function(){return{city:{selects:[],now:0},zone:{selects:[],now:0},school:{selects:[],now:0},table:{pagination:{page:1,size:10,total:0},datas:[]},form:{camera:[]},opened:!1,loading:!1,disabled:!1,searched:!1}},created:function(){e.get("user").level<1e4&&(this.disabled=!0),this.city=a.getCity()},methods:{changeCity:function(){this.zone=a.getZone(this.city.now),this.school={selects:[],now:0}},changeZone:function(){this.school=a.getSchool(this.zone.now)},search:function(){var e=this;this.searched=!0,o.get("/room/page",{idSchool:this.school.now,page:this.table.pagination.page-1}).then((function(t){t.ok&&e.setTable(t.body)}))},setTable:function(e){var t=this.table.pagination.size*(this.table.pagination.page-1);e.content.forEach((function(e,o){e.serial=o+t+1,e.school=a.getName(e.idSchool)})),this.table.datas=e.content,this.table.pagination.total=e.totalElements},create:function(){this.opened=!0,this.form.school=a.getTitle(this.school),this.form.id=null,this.form.camera=[]},update:function(e){var t=this;this.opened=!0,this.form.school=e.school,this.form.id=e.id,this.form.name=e.name,this.form.group=e.group,e.camera.forEach((function(e){var a=e.param1.split(","),o=e.param2.split(","),r=e.param3.split(",");t.form.index=a.length;for(var s=[],n=0;n<a.length;n++)s.push({param1:a[n],param2:o[n],param3:r[n]});e.params=s})),this.form.camera=e.camera},remove:function(e){var t=this;a.confirm(this,"确定删除该记录 ？",(function(a){t.loading=!0,a.close(),o.post("/room/delete",{id:e.id}).then((function(e){t.loading=!1,e.ok&&(r.$Message.success("删除成功"),t.search())}))}))},changeGroup:function(){if(this.form.group>this.form.camera.length)for(var e=this.form.camera.length;e<this.form.group;e++){for(var t=[],a=0;this.form.index&&a<this.form.index;a++)t.push({});this.form.camera.push({network:"",password:"",params:t})}this.form.group<this.form.camera.length&&this.form.camera.splice(this.form.group,this.form.camera.length)},changeIndex:function(){if(this.form.group&&this.form.group>0){var e=this.form.camera[0].params.length;if(this.form.index>e)for(var t=0;t<this.form.camera.length;t++)for(var a=this.form.camera[t].params,o=e;o<this.form.index;o++)a.push({});if(this.form.index<e)for(var r=0;r<this.form.camera.length;r++){this.form.camera[r].params.splice(this.form.index,e)}this.$forceUpdate()}},save:function(){for(var e=this,t=0;t<this.form.group;t++)if(!this.form.camera[t].network||!this.form.camera[t].username||!this.form.camera[t].password)return void r.$Message.error("请填写所有摄像头信息");this.loading=!0;var a=[],s=[],n=[],i=[],l=[],c=[];this.form.camera.forEach((function(e){a.push(e.network),s.push(e.username),n.push(e.password);var t=[],o=[],r=[];e.params.forEach((function(e){t.push(e.param1),o.push(e.param2),r.push(e.param3)})),i.push(t.join()),l.push(o.join()),c.push(r.join())})),this.form.id?o.post("/room/update",{id:this.form.id,type:1,group:this.form.group,network:a.join(";"),username:s.join(";"),password:n.join(";"),param1:i.join(";"),param2:l.join(";"),param3:c.join(";")}).then((function(t){e.loading=!1,e.opened=!1,t.ok&&(r.$Message.success("更新成功"),e.search())})):o.post("/room/create",{name:this.form.name,type:1,group:this.form.group,idSchool:this.school.now,network:a.join(";"),username:s.join(";"),password:n.join(";"),param1:i.join(";"),param2:l.join(";"),param3:c.join(";")}).then((function(t){e.loading=!1,e.opened=!1,t.ok&&(r.$Message.success("保存成功"),e.search())}))}}};t.default=s}).call(this,a(108),a(107).default,a(153).default,a(69))},634:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var o=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"frame-page"},[t("div",{staticClass:"h-panel page-header"},[t("div",{staticClass:"h-panel-body"},[t("Row",{attrs:{type:"flex",space:20}},[t("Cell",{attrs:{width:4}},[t("Select",{attrs:{datas:e.city.selects,placeholder:"选择城市"},on:{change:e.changeCity},model:{value:e.city.now,callback:function(t){e.$set(e.city,"now",t)},expression:"city.now"}})],1),e._v(" "),t("Cell",{attrs:{width:4}},[t("Select",{attrs:{datas:e.zone.selects,placeholder:"选择区县"},on:{change:e.changeZone},model:{value:e.zone.now,callback:function(t){e.$set(e.zone,"now",t)},expression:"zone.now"}})],1),e._v(" "),t("Cell",{attrs:{width:4}},[t("Select",{attrs:{datas:e.school.selects,placeholder:"选择学校"},model:{value:e.school.now,callback:function(t){e.$set(e.school,"now",t)},expression:"school.now"}})],1),e._v(" "),t("Cell",{attrs:{flex:1}},[t("Button",{attrs:{disabled:0==e.school.now,color:"primary",circle:"",size:"l"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),t("Button",{attrs:{disabled:e.disabled||0==e.school.now,color:"primary",circle:"",size:"l"},on:{click:e.create}},[e._v("创建教室")])],1)],1)],1)]),e._v(" "),t("div",{staticClass:"h-panel page-header"},[t("div",{staticClass:"h-panel-body"},[t("Table",{attrs:{datas:e.table.datas}},[t("TableItem",{attrs:{title:"序号",prop:"serial",width:140}}),e._v(" "),t("TableItem",{attrs:{title:"教室",prop:"name"}}),e._v(" "),t("TableItem",{attrs:{title:"学校",prop:"school"}}),e._v(" "),t("TableItem",{attrs:{title:"小组数",prop:"group"}}),e._v(" "),t("TableItem",{attrs:{title:"操作",width:200},scopedSlots:e._u([{key:"default",fn:function(a){var o=a.data;return[t("Button",{attrs:{"text-color":"primary",size:"xs","no-border":"",disabled:e.disabled},on:{click:function(t){return e.update(o)}}},[e._v("更新")]),e._v(" "),t("Button",{attrs:{"text-color":"primary",size:"xs","no-border":"",disabled:e.disabled},on:{click:function(t){return e.remove(o)}}},[e._v("删除")])]}}])}),e._v(" "),t("div",{attrs:{slot:"empty"},slot:"empty"},[e._v(e._s(e.searched?"无数据":"未搜索"))])],1),e._v(" "),t("br"),t("br"),e._v(" "),t("Pagination",{attrs:{align:"center",layout:"pager"},on:{change:e.search},model:{value:e.table.pagination,callback:function(t){e.$set(e.table,"pagination",t)},expression:"table.pagination"}})],1)])]),e._v(" "),t("Modal",{attrs:{type:"drawer-right"},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[t("div",{staticClass:"model-right"},[t("div",{staticClass:"title"},[e._v(e._s(e.form.id?"更新教室":"创建教室"))]),e._v(" "),t("Form",{ref:"form",attrs:{labelPosition:"left"}},[t("FormItem",{attrs:{label:"学校",readonly:""}},[e._v("\r\n          "+e._s(e.form.school)+"\r\n        ")]),e._v(" "),t("FormItem",{attrs:{label:"教室",prop:"name"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{type:"text",disabled:e.form.id,placeholder:"请输入教室名"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}})]),e._v(" "),t("FormItem",{attrs:{label:"小组",prop:"group"}},[t("Row",{attrs:{type:"flex","space-x":20}},[t("Cell",{attrs:{width:12}},[t("NumberInput",{attrs:{useOperate:!0,placeholder:"请输入小组数"},on:{change:e.changeGroup},model:{value:e.form.group,callback:function(t){e.$set(e.form,"group",t)},expression:"form.group"}})],1),e._v(" "),t("Cell",{attrs:{flex:1}},[t("NumberInput",{attrs:{useOperate:!0,placeholder:"请输入组员数"},on:{change:e.changeIndex},model:{value:e.form.index,callback:function(t){e.$set(e.form,"index",t)},expression:"form.index"}})],1)],1)],1),e._v(" "),e._l(e.form.camera,(function(a,o){return t("FormItem",{key:o,attrs:{label:"摄像头 "+(o+1)}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.network,expression:"e0.network"}],attrs:{type:"text",placeholder:"请输入网络地址"},domProps:{value:a.network},on:{input:function(t){t.target.composing||e.$set(a,"network",t.target.value)}}}),e._v(" "),t("Row",{attrs:{type:"flex","space-x":20}},[t("Cell",{attrs:{width:12}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.username,expression:"e0.username"}],staticClass:"top",attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:a.username},on:{input:function(t){t.target.composing||e.$set(a,"username",t.target.value)}}})]),e._v(" "),t("Cell",{attrs:{flex:1}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.password,expression:"e0.password"}],staticClass:"top",attrs:{type:"text",placeholder:"请输入密码"},domProps:{value:a.password},on:{input:function(t){t.target.composing||e.$set(a,"password",t.target.value)}}})])],1),e._v(" "),e._l(a.params,(function(a,o){return t("FormItem",{key:o,staticClass:"sub-item",attrs:{label:"座位 "+(o+1)}},[t("div",{staticClass:"h-input-group top"},[t("span",{staticClass:"h-input-addon"},[e._v("预置位")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.param1,expression:"e1.param1"}],attrs:{type:"text"},domProps:{value:a.param1},on:{input:function(t){t.target.composing||e.$set(a,"param1",t.target.value)}}}),e._v(" "),t("span",{staticClass:"h-input-addon"},[e._v("角度")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.param2,expression:"e1.param2"}],attrs:{type:"text"},domProps:{value:a.param2},on:{input:function(t){t.target.composing||e.$set(a,"param2",t.target.value)}}}),e._v(" "),t("span",{staticClass:"h-input-addon"},[e._v("屏幕地址")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.param3,expression:"e1.param3"}],attrs:{type:"text"},domProps:{value:a.param3},on:{input:function(t){t.target.composing||e.$set(a,"param3",t.target.value)}}})])])}))],2)})),e._v(" "),t("FormItem",[t("Button",{attrs:{color:"primary",circle:"",loading:e.loading},on:{click:e.save}},[e._v("保 存")]),e._v(" "),t("Button",{attrs:{circle:""},on:{click:function(t){e.opened=!1}}},[e._v("取 消")])],1)],2)],1)])],1)};t.render=o;t.staticRenderFns=[],o._withStripped=!0},635:function(e,t,a){},817:function(e,t,a){"use strict";var o=a(634);a.o(o,"render")&&a.d(t,"render",(function(){return o.render})),a.o(o,"staticRenderFns")&&a.d(t,"staticRenderFns",(function(){return o.staticRenderFns}))},818:function(e,t,a){"use strict";a(635)}}]);