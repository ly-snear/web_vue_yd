(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{379:function(e,t,s){"use strict";s.r(t);var r=s(860),a=s(535);for(var o in a)["default"].indexOf(o)<0&&function(e){s.d(t,e,(function(){return a[e]}))}(o);var n=s(16),l=Object(n.a)(a.default,r.render,r.staticRenderFns,!1,null,"3f75b964",null);t.default=l.exports},535:function(e,t,s){"use strict";s.r(t);var r=s(536),a=s.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){s.d(t,e,(function(){return r[e]}))}(o);t.default=a.a},536:function(e,t,s){"use strict";(function(e,s,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{year:{selects:[],now:0},step:{selects:[],now:0},clss:{selects:[],now:0},serial:{selects:[],now:0},checkbox:{array:[],selects:[]},type:{selects:[{title:"校外学习",key:1},{title:"课外活动",key:2}],now:0},form:{rules:{number:["hour"],required:["hour","name","created","type"]},name:null,created:null,type:null,hour:null,selects:[]},loading:!1}},created:function(){this.year=e.getYear(),this.step=e.getStep(),this.clss=e.getClss(this.year.now)},methods:{select:function(e){var t=this.checkbox.selects.findIndex((function(t){return t.id==e.id}));t<0?(e.color="#00C15E",this.checkbox.selects.push(e)):(e.color="#666666",this.checkbox.selects.splice(t,1))},setArray:function(e){for(var t=[],s=0;s<e.length;s+=10){for(var r=[],a=s;a<s+10&&a<e.length;a++){var o=e[a];o.color="#666666",r.push(o)}t.push({key:"k"+s,list:r})}this.checkbox.array=t},changeClss:function(){var e=this;s.get("/student/list",{idYear:this.year.now,idClass:this.clss.now}).then((function(t){t.ok&&e.setArray(t.body)}))},changeType:function(){switch(this.type.now){case 1:this.form.selects=[{title:"艺术学习",key:11},{title:"艺术实践",key:12}];break;case 2:this.form.selects=[{title:"兴趣小组",key:21},{title:"社团活动",key:22},{title:"其他活动",key:23}];break;default:this.form.selects=[]}this.form.type=0},save:function(){var t=this;this.$refs.form.valid()&&e.confirm(this,"确定提交该活动 ？",(function(a){t.loading=!0,a.close();var o=[],n=[];t.checkbox.selects.forEach((function(e){o.push(e.id),n.push(e.name)})),s.post("/stu/action/create",{semester:t.step.now,name:t.form.name,type:t.form.type,hour:t.form.hour,created:e.getStamp(t.form.created),idClass:t.clss.now,idStudentList:o.join(),exStudentList:n.join()}).then((function(e){t.loading=!1,t.checkbox.selects.forEach((function(e){e.color="#666666"})),t.checkbox.selects=[],e.ok&&r.$Message.success("提交成功")}))}))}}};t.default=a}).call(this,s(107).default,s(153).default,s(69))},674:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticRenderFns=t.render=void 0;var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"frame-page"},[t("div",{staticClass:"h-panel page-header"},[t("div",{staticClass:"h-panel-body"},[t("Row",{attrs:{space:20}},[t("Cell",{attrs:{width:4}},[t("Select",{attrs:{datas:e.year.selects,deletable:!1,disabled:""},model:{value:e.year.now,callback:function(t){e.$set(e.year,"now",t)},expression:"year.now"}})],1),e._v(" "),t("Cell",{attrs:{width:4}},[t("Select",{attrs:{datas:e.step.selects,deletable:!1,disabled:""},model:{value:e.step.now,callback:function(t){e.$set(e.step,"now",t)},expression:"step.now"}})],1),e._v(" "),t("Cell",{attrs:{width:4}},[t("Select",{attrs:{datas:e.clss.selects,deletable:!1,placeholder:"选择班级"},on:{change:e.changeClss},model:{value:e.clss.now,callback:function(t){e.$set(e.clss,"now",t)},expression:"clss.now"}})],1)],1)],1)]),e._v(" "),t("div",{staticClass:"h-panel page-header"},[t("div",{staticClass:"h-panel-body"},[t("Form",{ref:"form",attrs:{labelPosition:"left",labelWidth:100,model:e.form,rules:e.form.rules,showErrorTip:""}},[t("FormItem",{attrs:{label:"活动类型",prop:"type"}},[t("Row",{attrs:{"space-x":20,type:"flex"}},[t("Cell",{attrs:{width:4}},[t("Select",{attrs:{datas:e.type.selects},on:{change:e.changeType},model:{value:e.type.now,callback:function(t){e.$set(e.type,"now",t)},expression:"type.now"}})],1),e._v(" "),t("Cell",{attrs:{width:4}},[t("Select",{attrs:{datas:e.form.selects},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1)],1)],1),e._v(" "),t("FormItem",{attrs:{label:"活动名称",prop:"name"}},[t("Cell",{attrs:{width:4}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{type:"text",placeholder:"输入名称"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}})])],1),e._v(" "),t("FormItem",{attrs:{label:"参加日期",prop:"created"}},[t("Cell",{attrs:{width:4}},[t("DatePicker",{attrs:{format:"YYYY-MM-DD"},model:{value:e.form.created,callback:function(t){e.$set(e.form,"created",t)},expression:"form.created"}})],1)],1),e._v(" "),t("FormItem",{attrs:{label:"课时数",prop:"hour"}},[t("Cell",{attrs:{width:4}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.hour,expression:"form.hour"}],attrs:{type:"number"},domProps:{value:e.form.hour},on:{input:function(t){t.target.composing||e.$set(e.form,"hour",t.target.value)}}})])],1),e._v(" "),t("FormItem",{attrs:{label:"选择学生",required:""}},e._l(e.checkbox.array,(function(s){return t("Row",{key:s.key},e._l(s.list,(function(s){return t("Cell",{key:s.id,attrs:{width:2,value:s}},[t("Checkbox",{staticClass:"check",style:{color:s.color},attrs:{value:s},on:{change:function(t){return e.select(s)}},model:{value:e.checkbox.selects,callback:function(t){e.$set(e.checkbox,"selects",t)},expression:"checkbox.selects"}},[e._v(e._s(s.name))])],1)})),1)})),1),e._v(" "),t("br"),e._v(" "),t("FormItem",[t("Button",{attrs:{color:"primary",circle:"",loading:e.loading,disabled:0==e.checkbox.selects.length},on:{click:e.save}},[e._v("提 交")])],1)],1)],1)])])};t.render=r;t.staticRenderFns=[],r._withStripped=!0},860:function(e,t,s){"use strict";var r=s(674);s.o(r,"render")&&s.d(t,"render",(function(){return r.render})),s.o(r,"staticRenderFns")&&s.d(t,"staticRenderFns",(function(){return r.staticRenderFns}))}}]);